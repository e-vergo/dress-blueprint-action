/* ========== Blueprint Page Styles ========== */
/* Note: This file depends on common.css being loaded first.
   common.css provides: sbs layout, proof toggles, Lean syntax, Tippy themes, modals, CSS variables */

/* ========== Theme Blue Base (from plasTeX) ========== */
@charset "UTF-8";
a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{font:inherit;font-size:100%;margin:0;padding:0;border:0}
article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}
body{line-height:1;overflow-x:hidden;background:var(--sbs-bg-page)}
ol,ul{list-style:none}
blockquote,q{quotes:none}
blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}
table{border-spacing:0;border-collapse:collapse}
.clear:after{font-size:0;display:block;visibility:hidden;clear:both;height:0;content:" "}
.clear{display:inline-block}
* html .clear{height:1%}
.clear{display:block}
*{box-sizing:border-box}
hr{clear:both;border:none;outline:none}
em{font-style:italic}
a{text-decoration:underline;color:var(--sbs-link)}
a:hover{color:var(--sbs-link-hover)}
ul{list-style:disc}
ol{list-style:decimal}
ol,ul{font-size:14px;padding:0 0 0 33px}
ol li,ul li{margin:0}
blockquote{padding:0 15px 0 40px}
table{font-size:13px;width:100%;margin:20px 0;background:var(--sbs-bg-surface)}
table th{font-size:16px;font-weight:700}
table tr td{padding:7px}
::selection{color:var(--sbs-selection-text);background:var(--sbs-selection-bg)}
::-moz-selection{color:var(--sbs-selection-text);background:var(--sbs-selection-bg)}
body{height:100vh;margin:0;flex-direction:column;color:var(--sbs-text);background-color:var(--sbs-bg-page)}
body,div.wrapper{display:flex;overflow:hidden}
div.wrapper{flex-grow:1}
div.content-wrapper{max-width:1800px}
@media (min-width:1024px){div.content-wrapper{margin-left:auto;margin-right:auto}}
div.content{flex-grow:1;display:flex;flex-direction:column;overflow:auto;padding:.5rem;margin-bottom:2.5rem}
@media (min-width:1024px){div.content{padding:1rem;margin-bottom:0}}
/* Blueprint content area sizing - matches paper page (200ch = 100ch + 100ch doublet) */
div.content{width:calc(200ch + 5rem);max-width:95%;margin-left:auto;margin-right:auto;padding:1.5rem 2rem}
div.centered{display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;justify-content:space-around;min-width:100%;margin:0 auto}
div.flushleft,div.raggedright{display:flex;justify-content:flex-start}
div.flushright,div.raggedbottom,div.raggedleft{display:flex;justify-content:flex-end}
div.raggedbottom{flex-direction:column}
div.content{line-height:1.4rem}
div.content>p{margin:2.1rem 0}
li>p{margin:.28rem 0}
.icon{display:inline-block;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1rem;height:1rem;stroke-width:0;stroke:currentColor;fill:currentColor}
h1,h2,h3,h4,h5,h6{font-family:Lucida Grande,Arial,Helvetica,sans-serif}
h1{font-size:2rem;line-height:2rem;margin:1rem 0}
h1,h2{color:var(--sbs-heading)}
h2{font-size:1.5rem;margin:.8rem 0}
h3,h4{margin:.67rem 0;color:var(--sbs-heading)}
h3,h4,p{font-size:1rem}
p{margin:.5rem 0}
.titlepage{text-align:center}
.titlepage h1{font-weight:400}
b,strong{font-weight:700}
dfn{font-style:italic}
code,kbd,pre,samp{font-family:monospace,serif;font-size:1rem}
pre{white-space:pre-wrap}
q{quotes:""" """ "'" "'"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5rem}
sub{bottom:-.25rem}
.mdseries,.textmf{font-weight:400}
.bfseries,.textbf{font-weight:700}
.rmfamily,.textrm{font-family:serif}
.sffamily,.textsf{font-family:sans-serif}
.texttt,.ttfamily{font-family:monospace}
.textup,.upshape{text-transform:uppercase}
.itshape,.textit{font-style:italic}
.slshape,.textsl{font-style:oblique}
.scshape,.textsc{font-variant:small-caps}
small.tiny{font-size:x-small}
small.scriptsize{font-size:smaller}
small.footnotesize,small.small{font-size:small}
.normalsize{font-size:normal}
big.large{font-size:large}
big.xlarge,big.xxlarge{font-size:x-large}
big.huge,big.xhuge{font-size:xx-large}
.rm{font-family:serif;font-style:normal;font-weight:400}
.cal,.it{font-style:italic}
.cal,.it,.sl{font-family:serif;font-weight:400}
.sl{font-style:oblique}
.bf{font-family:serif;font-weight:700}
.bf,.tt{font-style:normal}
.tt{font-family:monospace;font-weight:400}
.underbar{text-decoration:underline}
.fbox,.framebox{border:1px solid var(--sbs-text);padding:1px 3px}
.quotation p,.quote p,.verse p{margin-top:0;margin-bottom:.5em}
hr{color:var(--sbs-border)}
dd{margin-left:3rem}
dd p{padding:0;margin:0 0 1rem}
ul.breadcrumbs{margin:0;padding:0;list-style:none;font-size:small}
ul.breadcrumbs li{display:inline}
ul.breadcrumbs a{text-decoration:none;color:var(--sbs-accent)}
li.crumb:after{content:" / "}
div.equation{display:flex;align-items:center;margin:1rem}
div.equation span.equation_label{margin-right:1rem}
div.equation span.equation_label:before{content:"("}
div.equation span.equation_label:after{content:")"}
div.equation div.equation_content{margin:auto}
figure{display:flex;flex-direction:column;vertical-align:bottom;overflow:auto}
figure img{display:block;margin:0 auto}
figcaption{display:block;text-align:center;margin-bottom:.1rem}
span.caption_ref,span.caption_title,span.subcaption{font-weight:700}
span.caption_ref:after{content:":"}
span.subref:after{content:")"}
footer#footnotes{clear:both;padding-top:1rem;padding-left:1rem;border-color:var(--sbs-border);border-top:1px solid}
footer#footnotes h1{font-size:1.5rem;margin:0;margin-bottom:.5rem;color:var(--sbs-text)}
a.footnote{text-decoration:none}
a.footnote sup:after{content:"]"}
a.footnote sup:before{content:"["}
body>header{background:linear-gradient(180deg,var(--sbs-accent) 0,var(--sbs-accent));color:#fff;display:flex;align-items:center;padding:.5rem}
#toc-toggle{font-size:1.75rem;margin-right:1rem;cursor:pointer;color:#fff;display:none}
@media (max-width:1023px){#toc-toggle{display:inline-block}}
h1#doc_title{color:#fff;font-size:1.5rem;margin:auto}
#doc_title a,#doc_title a:visited{text-decoration:none;color:#fff}
.theindex li{list-style-type:none}
nav.index-groups{margin-bottom:1rem}
a[class^=index-group]{text-decoration:none}
a.index-group:after{content:" |"}
section.theindex{display:flex;flex-direction:row;flex-wrap:wrap;margin-top:1rem}
section.theindex h2{min-width:100%;margin:1rem 0 .5rem}
ul.index-column{min-width:100%}
@media (min-width:1024px){ul.index-column{min-width:auto}}
nav.prev_up_next a.index{font-size:small;padding-left:.5rem;padding-right:.5rem}
dl.description dt{font-weight:700}
table.list{margin-left:15px;margin-top:1em;margin-bottom:1em}
table.list td{padding-right:5px}
div.displaymath{overflow:auto}
a.eqref:before{content:"("}
a.eqref:after{content:")"}
nav.prev_up_next{position:fixed;z-index:1;right:0;bottom:0;display:flex;height:2.5rem;background:linear-gradient(180deg,var(--sbs-accent) 0,var(--sbs-accent))}
nav.prev_up_next a{font-size:150%;margin:auto;padding:.5rem 1rem;text-decoration:none;color:#fff;text-shadow:1px 2px 0 rgba(0,0,0,.8)}
hspace,vspace{margin:0;padding:0}
div.bigskip{margin-bottom:4rem}
div.medskip{margin:0;padding:0;margin-bottom:2rem}
div.bigskip{margin:0;padding:0;margin-bottom:1rem}
.tabular{border-collapse:collapse;color:var(--sbs-text);background-color:var(--sbs-bg-page);width:auto}
.tabular td,.tabular th{vertical-align:baseline;text-align:left;padding:.3em .6em;empty-cells:show}
td p:first-child,th p:first-child{margin-top:0;margin-bottom:0}
td p,th p{margin-top:1em;margin-bottom:0}
@keyframes a{0%{background-color:var(--sbs-border)}to{background-color:var(--sbs-bg-page)}}
div[class$=_thmwrapper]{margin-top:1rem}
div[class$=_thmwrapper]:target{animation:a 1s ease}
div[class$=_thmheading]{display:flex;font-weight:700;line-height:150%}
span[class$=_thmtitle]:before{content:"("}
span[class$=_thmtitle]:after{content:")"}
div[class$=_thmcontent]{font-weight:400;margin-left:1rem;padding-top:.14rem;padding-left:1rem}
span[class$=_thmlabel]{margin-left:.5rem;margin-right:.5rem}
div[class$=proof_heading]{font-weight:700;line-height:120%;cursor:pointer}
div.proof_content{font-weight:400;margin-left:1rem;padding-top:.5rem;padding-left:1rem}
span.expand-proof{font-size:80%}
div.hilite{animation:a 1s ease}
span.qed{float:right}
/* Old plasTeX modal styles removed - now using .dep-modal-* from common.css */
a.icon{text-decoration:none;color:var(--sbs-text);border:none;background-color:Transparent}
div[class$=_thmheading]:hover div.thm_header_hidden_extras{display:inline-block}
div.thm_header_hidden_extras{display:none}
ul.quizz{display:flex;flex-direction:column;list-style:circle!important}
ul.quizz li{display:flex;padding:.5rem;flex-direction:row;min-width:100%;min-height:3rem;flex-grow:1;align-items:center;justify-content:space-between}
ul.quizz li.active-qright{background-color:green}
ul.quizz li.active-qwrong{background-color:red}
ul.quizz svg.icon{display:none;padding-right:.5rem;width:2rem;height:2rem}
.tikzcd{overflow:auto}
.tikzcd,.tikzpicture{display:block;margin:.5rem auto}
.local_toc ul{padding-left:1rem;list-style:none}
.local_toc ul a{text-decoration:none;color:var(--sbs-text)}
.local_toc ul li{padding:.2rem 0}
nav.toc{flex-shrink:0;display:none;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;flex-direction:column;margin-right:1rem;padding:0;padding-right:1rem;transition:left .5s ease;background-color:var(--sbs-accent);border-right:none}
@media (min-width:1024px){nav.toc{display:flex;max-width:25ch}}
nav.active{width:100%}
.toc ul{min-width:100%;padding-left:0;list-style:none}
.toc ul a{display:inline-block;max-width:90%;padding-top:.5rem;padding-right:.5rem;padding-bottom:.5rem;transition:all .1s ease;text-align:left;text-decoration:none;font-size:1.125rem;color:#fff;flex-grow:1}
.toc ul a:hover{transition:all .2s ease;background:var(--sbs-accent)}
.toc .nav-separator {
  height: 1px;
  background-color: rgba(255,255,255,0.3);
  margin: 0.5rem 0.75rem;
  list-style: none;
}
.toc ul li{display:flex;min-width:100%;align-items:center;flex-wrap:wrap;justify-content:space-between;background-color:var(--sbs-accent)}
.toc ul li.current{background-color:rgba(255, 255, 255, 0.2);font-weight:400}
.sub-toc-0 a{padding-left:.8rem}
.sub-toc-1 a{padding-left:1.6rem}
.sub-toc-2 a{padding-left:2.4rem}
.sub-toc-3 a{padding-left:3.2rem}
.sub-toc-4 a{padding-left:4rem}
ul.sub-toc-1,ul.sub-toc-2,ul.sub-toc-3,ul.sub-toc-4{display:none}
span.expand-toc{min-width:.7rem;width:.8rem;height:.8rem;padding:0;padding-right:.5rem;font-size:125%;cursor:pointer;text-align:center;color:#fff;background-color:Transparent}
svg.close-toc{min-width:1.3rem;min-height:1.3rem;margin:.5rem;margin-left:auto;display:none;cursor:pointer;text-align:center;color:#fff;background-color:Transparent}
nav.active svg.close-toc{display:inline-block}
ul.active{display:block}
code.verb{font-family:monospace;font-style:normal;font-weight:400}
pre.verbatim{margin:1rem 2rem;background-color:var(--sbs-bg-surface);padding:.5rem}

/* ========== Side-by-side Layout (from leanblueprint) ========== */

/* Constrain non-node content (paragraphs, lists, display math) to left column width.
   These elements appear in chapter-page, section, and direct content areas. */
.chapter-page > p,
.chapter-page > div.displaymath,
.chapter-page > ul,
.chapter-page > ol,
.chapter-page > blockquote,
section.section > p,
section.section > div.displaymath,
section.section > ul,
section.section > ol,
section.section > blockquote,
div.content > p,
div.content > div.displaymath,
div.content > ul:not(.chapter-index):not(.dashboard-list):not(.notes-list):not(.toc),
div.content > ol,
div.content > blockquote {
  max-width: 100ch;
}

a.github_link {
  font-weight: normal;
  font-size: 90%;
  text-decoration: none;
  color: inherit;
}

/* Note: .sbs-container grid layout is defined in common.css
   This section only adds blueprint-specific spacing */
.sbs-container {
  margin-bottom: 3rem;
}

/* Note: .sbs-latex-column sizing is defined in common.css */
.sbs-latex-column {
  overflow-wrap: break-word;
  word-wrap: break-word;
}

.sbs-lean-column {
  min-width: 0;
  overflow-wrap: break-word;
  word-wrap: break-word;
  overflow-x: auto;
  position: relative;
}

.sbs-lean-column pre.lean-code {
  margin: 0;
  padding: 0;
  background: transparent;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  font-size: 0.85rem;
  line-height: 1.5;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sbs-lean-column pre.lean-code code {
  font-family: inherit;
}

.lean-github-hover {
  position: absolute;
  top: 0;
  right: 0;
  opacity: 0;
  transition: opacity 0.2s;
  padding: 0.25rem;
  color: var(--sbs-text-muted);
}

.lean-github-hover:hover {
  color: var(--sbs-link);
}

.sbs-lean-column:hover .lean-github-hover {
  opacity: 1;
}

.thm_body_extras {
  display: none;
}

.proof_wrapper.proof_inline {
  display: block !important;
}

.proof_wrapper.proof_inline .proof_content {
  display: none;
}

/* ========== Multi-page Navigation ========== */
.prev-next-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 3rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--sbs-border);
}

.prev-next-nav a {
  color: var(--sbs-accent);
  text-decoration: none;
  padding: 0.5rem 1rem;
  border: 1px solid var(--sbs-border);
  border-radius: 4px;
  transition: background-color 0.2s;
}

.prev-next-nav a:hover {
  background-color: var(--sbs-bg-surface);
}

.prev-next-nav a.prev {
  margin-right: auto;
}

.prev-next-nav a.next {
  margin-left: auto;
}

/* Chapter list on index page */
.chapter-list {
  margin: 2rem 0;
}

.chapter-list h2 {
  margin-bottom: 1rem;
  color: var(--sbs-heading);
}

.chapter-index {
  padding-left: 1.5rem;
}

.chapter-index li {
  margin: 0.5rem 0;
  line-height: 1.6;
}

.chapter-index a {
  color: var(--sbs-accent);
  text-decoration: none;
}

.chapter-index a:hover {
  text-decoration: underline;
}

/* Chapter page styling */
.chapter-page {
  margin: 1rem 0;
}

.chapter-title {
  color: var(--sbs-heading);
  margin-bottom: 1.5rem;
}

.chapter-nodes, .section-nodes {
  margin: 1rem 0;
}

.section {
  margin: 2rem 0;
  padding-top: 1rem;
  border-top: 1px solid var(--sbs-border);
}

.section-title {
  color: var(--sbs-heading);
  margin-bottom: 1rem;
}

/* Active sidebar item highlighting */
nav.toc li.active a {
  background-color: var(--sbs-accent);
  font-weight: bold;
}

/* ========== Blueprint Theme Styles (from Theme.lean) ========== */
/* Legacy --bp-* variables mapped to --sbs-* for backwards compatibility */
:root {
  --bp-primary: var(--sbs-link);
  --bp-success: var(--sbs-success);
  --bp-warning: var(--sbs-warning);
  --bp-danger: var(--sbs-danger);
  --bp-muted: var(--sbs-text-muted);
  --bp-bg: var(--sbs-bg-surface);
  --bp-bg-alt: var(--sbs-bg-surface);
  --bp-border: var(--sbs-border);
  --bp-text: var(--sbs-text);
  --bp-text-muted: var(--sbs-text-muted);
  --bp-font-sans: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --bp-font-mono: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, Consolas, monospace;
  --bp-max-width: 1200px;
  --bp-spacing: 1.5rem;
}

/* Progress Section */
.progress-section {
  margin: 2rem 0;
  padding: 1rem 0;
}

/* Stats Box - matches dep-graph-legend styling */
.stats-box {
  background: var(--sbs-bg-surface);
  border: 1px solid var(--sbs-border);
  border-radius: 4px;
  min-width: 340px;
  font-size: 0.875rem;
  color: var(--sbs-text);
}

.stats-title {
  font-weight: bold;
  text-align: center;
  padding: 0.75rem 0.5rem;
  font-size: 1.25rem;
}

.stats-separator {
  width: calc(100% - 1.5rem);  /* Leave 0.75rem gap on each side */
  margin: 0 auto;  /* Center it */
  height: 1px;
  background-color: var(--sbs-border);
}

.stats-main {
  display: flex;
  align-items: stretch;
  padding: 0.75rem;
  gap: 0.75rem;
}

.stats-pie-container {
  flex-shrink: 0;
}

.stats-pie {
  width: 150px;
  height: 150px;
}

.stats-legend-separator {
  width: 1px;
  background-color: var(--sbs-border);
  align-self: stretch;
}

.stats-legend {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 0.25rem;
  flex-grow: 1;
}

.stats-legend .legend-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.stats-legend .legend-swatch {
  width: 16px;
  height: 16px;
  border-radius: 3px;
  flex-shrink: 0;
}

/* Color classes for stats legend - use unified status colors */
.stats-legend .legend-swatch.not-ready { background-color: var(--sbs-status-not-ready); }
.stats-legend .legend-swatch.stated { background-color: var(--sbs-status-stated); }
.stats-legend .legend-swatch.ready { background-color: var(--sbs-status-ready); }
.stats-legend .legend-swatch.sorry { background-color: var(--sbs-status-sorry); }
.stats-legend .legend-swatch.proven { background-color: var(--sbs-status-proven); }
.stats-legend .legend-swatch.fully-proven { background-color: var(--sbs-status-fully-proven); }
.stats-legend .legend-swatch.mathlib-ready { background-color: var(--sbs-status-mathlib-ready); }
.stats-legend .legend-swatch.in-mathlib { background-color: var(--sbs-status-in-mathlib); }

.stats-summary {
  padding: 0.75rem;
  text-align: center;
  min-height: calc(150px + 1.5rem);  /* Match pie height + stats-main padding */
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 0.5rem;
}

.stats-total {
  font-size: 0.875rem;
  font-weight: normal;
  color: var(--sbs-text);
}

.stats-percentages {
  font-size: 0.875rem;
  color: var(--sbs-text-muted);
}

/* Dashboard Grid Layout */
.dashboard-grid {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 2rem;
  width: 100%;
}

/* Top row: Progress (fixed width) + Key Theorems (fills remaining space) */
.dashboard-row.top-row {
  display: flex;
  gap: 1rem;
  align-items: stretch;
}

/* Bottom row: Project Notes spanning full width */
.dashboard-row.bottom-row {
  display: flex;
  width: 100%;
  min-height: 200px;  /* Match approximate top row height */
}

/* Ensure notes cell fills available height */
.dashboard-row.bottom-row .dashboard-cell.notes-cell {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.dashboard-row.bottom-row .stats-box.project-notes {
  flex: 1;
  min-height: 200px;
}

.dashboard-cell {
  min-height: 200px;
}

/* Progress stats box - fixed size, don't stretch */
.dashboard-cell.progress-cell {
  flex-shrink: 0;
  min-width: 400px;
  width: auto;
}

/* Key theorems fills remaining space */
.dashboard-cell.key-declarations-cell {
  flex: 1;
  min-width: 0;  /* Allow shrinking */
}

/* Notes cell spans full width */
.dashboard-cell.notes-cell {
  width: 100%;
}

/* Make all stats boxes in dashboard have same styling */
.stats-box.key-declarations,
.stats-box.project-notes {
  background: var(--sbs-bg-surface);
  border: 1px solid var(--sbs-border);
  border-radius: 8px;  /* Rounded corners */
  font-size: 0.875rem;
  color: var(--sbs-text);
  height: 100%;
  display: flex;
  flex-direction: column;
  width: auto;  /* Override fixed width from base stats-box */
}

/* Ensure the main stats-box also has rounded corners */
.stats-box {
  border-radius: 8px;
}

/* Dashboard list styling */
.dashboard-list {
  list-style: none;
  padding: 0;
  margin: 0.75rem;
  overflow-y: auto;
  flex-grow: 1;
}

.dashboard-list li {
  margin-bottom: 0.5rem;
  line-height: 1.4;
}

.dashboard-list a {
  color: var(--sbs-text-muted);
  text-decoration: none;
}

.dashboard-list a:hover {
  color: var(--sbs-text);
  text-decoration: underline;
}

/* Message and note text styling */
.message-text,
.note-text {
  color: var(--sbs-text-muted);
  font-style: italic;
}

/* Empty state */
.stats-empty {
  padding: 0.75rem;
  color: var(--sbs-text-muted);
  font-style: italic;
  text-align: center;
  flex-grow: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Notes content - multi-column layout */
.notes-content {
  padding: 0.75rem;
  overflow-y: auto;
  flex-grow: 1;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 0.75rem;
  align-items: start;
}

.note-section {
  margin-bottom: 0;
  background: var(--sbs-bg-surface);
  border-radius: 4px;
  padding: 0.5rem;
}

.note-section:last-child {
  margin-bottom: 0;
}

.note-section h4 {
  margin: 0 0 0.25rem 0;
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--sbs-text);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.note-section ul {
  margin: 0;
  padding-left: 0;
}

/* Responsive: stack on mobile */
@media (max-width: 768px) {
  .dashboard-row.top-row {
    flex-direction: column;
  }

  .dashboard-cell.progress-cell {
    width: 100%;
  }

  .dashboard-cell {
    min-height: 150px;
  }
}

/* ===================== */
/* Dashboard Phase 2 CSS */
/* ===================== */

/* Double progress panel width */
.progress-cell {
  min-width: 400px;
}

/* Key declaration previews */
.key-declarations-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  align-items: center;  /* Center content horizontally */
}

.key-declaration-item {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  padding: 0.5rem;
  border-bottom: 1px solid var(--sbs-border);
  justify-content: center;  /* Center content horizontally */
  width: 80%;
  max-width: none;  /* Remove the 600px fixed limit */
}

.key-declaration-item:last-child {
  border-bottom: none;
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
  margin-top: 0.5rem;
}

.key-declaration-link {
  flex: 1;
  text-decoration: none;
  color: inherit;
}

.key-declaration-title-link {
  cursor: pointer;
  color: var(--primary-color, #0066cc);
  text-decoration: none;
  font-weight: 600;
  display: block;
  margin-bottom: 0.5rem;
}

.key-declaration-title-link:hover {
  text-decoration: underline;
}

.key-declaration-preview {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.75rem;
  font-size: 0.8rem;
  cursor: text;
  user-select: text;
}

.kd-latex,
.kd-lean {
  overflow: visible;
}

.kd-env {
  font-weight: 600;
  color: var(--sbs-text);
}

.kd-label {
  color: var(--sbs-text-muted);
}

.kd-statement {
  margin-top: 0.25rem;
  color: var(--sbs-text);
}

.kd-lean code {
  font-size: 0.75rem;
  background: var(--sbs-bg-page);
  padding: 0.25rem;
  border-radius: 3px;
  display: block;
  overflow: hidden;
}

.kd-lean pre.lean-code {
  font-size: 0.75rem;
  background: var(--sbs-bg-page);
  padding: 0.25rem;
  border-radius: 3px;
  margin: 0;
  overflow: visible;
}

.kd-lean pre.lean-code code {
  font-size: inherit;
  background: transparent;
  padding: 0;
}

/* Stats details structured layout */
.stats-details {
  padding: 0.75rem;
}

.stats-details .stats-total {
  text-align: center;
  font-size: 1rem;
  font-weight: 600;
  margin-bottom: 0.75rem;
  color: var(--sbs-text);
}

.stats-details .stats-columns {
  display: flex;
  justify-content: center;  /* Center columns in panel */
  gap: 2rem;  /* Space between columns */
}

.stats-details .stats-column {
  width: 120px;  /* Reduced from ~160px (25% reduction) */
}

.stats-details .stats-column-header {
  text-align: center;  /* Center header over content */
  font-weight: 600;
  text-transform: uppercase;
  font-size: 0.75rem;
  margin-bottom: 0.5rem;
  color: var(--sbs-text-muted);
}

.stats-details .stats-row {
  display: flex;
  justify-content: space-between;  /* Push value right, label left */
  font-size: 0.85rem;
  padding: 0.15rem 0;
}

.stats-details .stats-value {
  text-align: right;
  min-width: 30px;
  font-weight: 600;
}

.stats-details .stats-label {
  text-align: left;
  color: var(--sbs-text-muted);
}

/* Project Notes two-column layout */
.notes-layout {
  display: flex;
  flex-direction: row;
  gap: 1.5rem;
  padding: 0.75rem;
}

.notes-messages,
.notes-other {
  flex: 1;
  min-width: 0;
}

.notes-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.notes-list li {
  margin-bottom: 0.5rem;
  line-height: 1.4;
}

.notes-list a {
  color: var(--sbs-text-muted);
  text-decoration: none;
}

.notes-list a:hover {
  color: var(--sbs-text);
  text-decoration: underline;
}

.note-content {
  color: var(--sbs-text);
  font-size: 0.875rem;
}

.notes-empty {
  color: var(--sbs-text-muted);
  font-style: italic;
  text-align: center;
  padding: 1rem;
}

.note-section .dashboard-list {
  margin: 0;
  padding-left: 1rem;
}

.note-section .dashboard-list li {
  margin-bottom: 0.25rem;
}

.note-text {
  color: var(--sbs-text-muted);
  font-size: 0.85rem;
}

/* ========================================
   Checks Tile (Dashboard)
   ======================================== */

.checks-tile {
  background-color: var(--bg-secondary, #f8f9fa);
  border-radius: 8px;
  padding: 1rem;
  margin-top: 1rem;
}

.checks-tile h3 {
  margin: 0 0 0.75rem 0;
  font-size: 1.1rem;
  color: var(--text-primary, #333);
}

.checks-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.check-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  border-radius: 4px;
  font-size: 0.9rem;
}

.check-item.check-pass {
  background-color: rgba(40, 167, 69, 0.1);
  border-left: 3px solid #28a745;
}

.check-item.check-fail {
  background-color: rgba(220, 53, 69, 0.1);
  border-left: 3px solid #dc3545;
}

.check-icon {
  font-weight: bold;
  font-size: 1.1rem;
}

.check-pass .check-icon {
  color: #28a745;
}

.check-fail .check-icon {
  color: #dc3545;
}

.check-text {
  color: var(--text-primary, #333);
}

.cycles-detail {
  margin-top: 0.5rem;
  padding-left: 1.5rem;
}

.cycles-detail ul {
  margin: 0;
  padding-left: 1rem;
  font-size: 0.85rem;
  color: var(--text-secondary, #666);
}

.cycles-detail li {
  margin: 0.25rem 0;
  font-family: monospace;
}

/* Legacy progress bar styles (kept for backwards compatibility) */
.progress-bar {
  height: 8px;
  background: var(--bp-border);
  border-radius: 4px;
  overflow: hidden;
  margin: 0.75rem 0;
}

.progress-fill {
  height: 100%;
  background: var(--bp-primary);
  transition: width 0.3s ease;
}

.progress-label {
  font-size: 0.8125rem;
  color: var(--bp-text-muted);
  text-align: right;
  margin-top: 0.25rem;
}

.progress-stats {
  display: flex;
  flex-wrap: wrap;
  gap: 0.25rem 1rem;
  align-items: center;
  font-size: 0.8125rem;
  color: var(--bp-text-muted);
}

.stat {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
}

.stat::before {
  content: '';
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 2px;
  flex-shrink: 0;
}

.stat.proved::before { background: var(--bp-success); }
.stat.mathlib::before { background: var(--bp-primary); }
.stat.stated::before { background: var(--bp-warning); }
.stat.not-ready::before { background: var(--bp-danger); }
.stat.total::before { background: var(--bp-text-muted); }

.stat-separator {
  color: var(--bp-border);
  margin: 0 0.25rem;
}

/* Node Styles */
.node {
  border: 1px solid var(--bp-border);
  border-radius: 8px;
  margin: 1.5rem 0;
  overflow: hidden;
}

.node-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem;
  background: var(--bp-bg-alt);
  border-bottom: 1px solid var(--bp-border);
}

.node-env {
  font-weight: 600;
  text-transform: capitalize;
}

.node-title {
  flex: 1;
}

.node-status {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

.status-proved .node-status, .node-proved .node-status { background: var(--bp-success); }
.status-mathlib-ok .node-status, .node-mathlib-ok .node-status { background: var(--bp-primary); }
.status-stated .node-status, .node-stated .node-status { background: var(--bp-warning); }
.status-not-ready .node-status, .node-not-ready .node-status { background: var(--bp-danger); }

.node-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  padding: 1rem;
}

@media (max-width: 768px) {
  .node-content {
    grid-template-columns: 1fr;
  }
}

.node-statement, .node-proof {
  padding: 1rem;
  background: var(--bp-bg-alt);
  border-radius: 4px;
}

.node-statement h4, .node-proof h4 {
  margin: 0 0 0.75rem 0;
  font-size: 0.875rem;
  color: var(--bp-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.node-footer {
  padding: 0.75rem 1rem;
  border-top: 1px solid var(--bp-border);
  font-size: 0.875rem;
  color: var(--bp-text-muted);
}

.node-decls, .node-deps {
  display: inline;
}

.node-decls + .node-deps::before {
  content: " | ";
  margin: 0 0.5rem;
}

.decl-link, .dep-link {
  color: var(--bp-primary);
  text-decoration: none;
}

.decl-link:hover, .dep-link:hover {
  text-decoration: underline;
}

/* Index Page */
.index-header {
  text-align: center;
  margin-bottom: 2rem;
}

.index-header h1 {
  margin-bottom: 1rem;
}

.github-link, .docs-link {
  margin: 0 0.5rem;
  color: var(--bp-primary);
}

/* Graph Section */
.graph-section {
  margin: 2rem 0;
}

.dep-graph-container {
  position: relative;
  width: 100%;
  border: 1px solid var(--bp-border);
  border-radius: 8px;
  background: var(--bp-bg-alt);
  overflow: hidden;
}

.dep-graph-toolbar {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  z-index: 10;
  display: flex;
  gap: 0.25rem;
  background: var(--bp-bg);
  border: 1px solid var(--bp-border);
  border-radius: 4px;
  padding: 0.25rem;
}

.dep-graph-toolbar button {
  padding: 0.25rem 0.5rem;
  border: 1px solid var(--bp-border);
  border-radius: 3px;
  background: var(--bp-bg);
  color: var(--bp-text);
  cursor: pointer;
  font-size: 0.875rem;
  line-height: 1;
  transition: background 0.15s ease;
}

.dep-graph-toolbar button:hover {
  background: var(--bp-bg-alt);
}

.dep-graph-toolbar button:active {
  background: var(--bp-border);
}

/* Fit button expands to fill available width */
.dep-graph-toolbar button#graph-fit {
  flex: 1;
}

.dep-graph-viewport {
  width: 100%;
  min-height: 200px;
  max-height: 600px;
  overflow: auto;
  cursor: grab;
  background: var(--sbs-graph-bg);
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: none;
}

.dep-graph-viewport:active {
  cursor: grabbing;
}

.dep-graph-svg {
  transform-origin: 0 0;
  will-change: transform;
  display: inline-block;  /* Shrink-wrap to SVG size */
  user-select: none;
  -webkit-user-select: none;
}

.dep-graph-svg.dragging {
  transition: none !important;
}

.dep-graph-svg svg {
  display: block;
  background: var(--sbs-graph-bg);
}

.dep-graph-svg text,
.dep-graph-svg tspan {
  pointer-events: none;  /* Prevent text from interfering with drag */
  user-select: none;
}

.dep-graph-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 200px;
  color: var(--bp-text-muted);
  font-style: italic;
}

/* Node highlight animation */
.node-highlight {
  animation: node-flash 2s ease-out;
}

@keyframes node-flash {
  0%, 100% { box-shadow: none; }
  20%, 80% { box-shadow: 0 0 0 4px var(--bp-primary); }
}

/* Node Lists */
.node-lists {
  margin: 2rem 0;
}

.node-list h3 {
  margin-bottom: 1rem;
}

.node-index {
  list-style: none;
  padding: 0;
  margin: 0;
}

.node-index li {
  padding: 0.5rem 0;
  border-bottom: 1px solid var(--bp-border);
}

.node-index a {
  color: var(--bp-text);
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.node-index a:hover {
  color: var(--bp-primary);
}

/* Lean Code Highlighting */
pre.lean-code {
  font-family: var(--bp-font-mono);
  font-size: 0.875rem;
  padding: 1rem;
  overflow-x: auto;
  background: var(--bp-bg);
}

/* Math rendering */
.math.inline { }
.math.display {
  overflow-x: auto;
  padding: 1rem 0;
}

/* ========== Full-page Graph Styles ========== */
.dep-graph-page {
  height: 100vh;
  display: flex;
  flex-direction: column;
}

.dep-graph-page .wrapper {
  flex: 1;
  display: flex;
  overflow: hidden;
}

.dep-graph-page .content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  padding: 1rem;
}

.dep-graph-fullpage {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.dep-graph-fullpage .dep-graph-viewport {
  flex: 1;
  height: 90vh !important;
  max-height: none;
}

/* Graph header with link to full page */
.graph-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.graph-header h2 {
  margin: 0;
}

.graph-fullpage-link {
  color: var(--bp-primary);
  text-decoration: none;
  font-size: 0.875rem;
  padding: 0.25rem 0.75rem;
  border: 1px solid var(--bp-border);
  border-radius: 4px;
  transition: background-color 0.2s;
}

.graph-fullpage-link:hover {
  background-color: var(--bp-bg-alt);
  text-decoration: none;
}

/* Graph link card (on homepage) */
.graph-link-card {
  margin: 2rem 0;
}

.graph-card-link {
  text-decoration: none;
  color: inherit;
  display: block;
}

.graph-card {
  display: flex;
  align-items: center;
  padding: 1.5rem;
  background: var(--bp-bg-alt);
  border: 1px solid var(--bp-border);
  border-radius: 8px;
  transition: background-color 0.2s, border-color 0.2s;
}

.graph-card:hover {
  background-color: var(--sbs-graph-card-hover);
  border-color: var(--bp-primary);
}

.graph-card-icon {
  flex-shrink: 0;
  width: 64px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--bp-primary);
  margin-right: 1.5rem;
}

.graph-card-icon svg {
  width: 48px;
  height: 48px;
}

.graph-card-content {
  flex: 1;
}

.graph-card-content h3 {
  margin: 0 0 0.5rem 0;
  color: var(--bp-text);
  font-size: 1.25rem;
}

.graph-card-content p {
  margin: 0;
  color: var(--bp-text-muted);
  font-size: 0.95rem;
}

.graph-card-arrow {
  flex-shrink: 0;
  font-size: 1.5rem;
  color: var(--bp-primary);
  margin-left: 1rem;
}

/* Graph legend styling */
.graph-legend {
  margin-bottom: 1rem;
  padding: 1rem;
  background: var(--bp-bg-alt);
  border: 1px solid var(--bp-border);
  border-radius: 8px;
}

.graph-legend .title {
  display: flex;
  align-items: center;
  font-weight: bold;
  cursor: pointer;
  margin-bottom: 0.5rem;
}

.graph-legend .btn {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-left: 0.5rem;
  padding: 3px;
}

.graph-legend .bar {
  width: 18px;
  height: 2px;
  background: var(--bp-text);
}

.graph-legend dl.legend {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 0.25rem 1rem;
  margin: 0;
  padding: 0;
  font-size: 0.875rem;
}

.graph-legend dt {
  font-weight: 600;
  color: var(--bp-text);
}

.graph-legend dd {
  margin: 0;
  color: var(--bp-text-muted);
}

/* ========== Dependency Graph Modal Styles ========== */
/* Note: Base .dep-modal-container, .dep-modal-content, .dep-closebtn
   are defined in common.css. This section only adds blueprint-specific
   modal styling extensions. */

.dep-modal-body {
  padding-top: 10px;
}

.dep-modal-header {
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--bp-border);
}

.dep-modal-type {
  font-weight: bold;
  color: var(--bp-primary);
}

.dep-modal-label {
  color: var(--bp-text);
}

.dep-modal-links {
  margin-top: 1rem;
}

.dep-modal-links a {
  color: var(--bp-primary);
  text-decoration: none;
  padding: 0.5rem 1rem;
  border: 1px solid var(--bp-border);
  border-radius: 4px;
  display: inline-block;
}

.dep-modal-links a:hover {
  background-color: var(--bp-bg-alt);
}

/* SVG node click styling */
.dep-graph-svg .node {
  cursor: pointer;
}

/* Node hover highlight with smooth transition */
.dep-graph-svg .node ellipse,
.dep-graph-svg .node rect,
.dep-graph-svg .node polygon {
  transition: stroke-width 0.15s ease;
}

.dep-graph-svg .node:hover ellipse,
.dep-graph-svg .node:hover rect,
.dep-graph-svg .node:hover polygon {
  stroke-width: 3px;
}

/* ========== Static HTML Legend and Toolbar ========== */

/* Wrapper for controls + graph - uses grid for side-by-side layout */
.dep-graph-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
  display: grid;
  grid-template-columns: 200px 1fr;
  gap: 0.5rem;
  padding: 0.5rem;
}

/* Combined controls container (legend + toolbar) */
.dep-graph-controls {
  position: static;  /* No longer absolute - grid handles positioning */
  z-index: 20;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  align-self: start;  /* Align to top of grid cell */
}

/* When toolbar is inside controls, remove its absolute positioning */
.dep-graph-controls .dep-graph-toolbar {
  position: static;
}

/* Compact legend styles */
.dep-graph-legend {
  background: var(--sbs-legend-bg);
  border: 1px solid var(--sbs-border);
  border-radius: 4px;
  padding: 0.5rem;
  font-size: 0.875rem;
  color: var(--sbs-legend-text);
}

.dep-graph-legend .legend-title {
  font-weight: bold;
  margin-bottom: 0.5rem;
}

.dep-graph-legend .legend-items {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.dep-graph-legend .legend-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.dep-graph-legend .legend-swatch {
  width: 16px;
  height: 16px;
  border-radius: 3px;
}

/* 8 Status Colors - use unified CSS variables */
.dep-graph-legend .legend-swatch.not-ready { background-color: var(--sbs-status-not-ready); }
.dep-graph-legend .legend-swatch.stated { background-color: var(--sbs-status-stated); }
.dep-graph-legend .legend-swatch.ready { background-color: var(--sbs-status-ready); }
.dep-graph-legend .legend-swatch.sorry { background-color: var(--sbs-status-sorry); }
.dep-graph-legend .legend-swatch.proven { background-color: var(--sbs-status-proven); }
.dep-graph-legend .legend-swatch.fully-proven { background-color: var(--sbs-status-fully-proven); }
.dep-graph-legend .legend-swatch.mathlib-ready { background-color: var(--sbs-status-mathlib-ready); }
.dep-graph-legend .legend-swatch.in-mathlib { background-color: var(--sbs-status-in-mathlib); }

/* Legend separator line between colors and shapes */
.dep-graph-legend .legend-separator {
  width: 100%;
  height: 1px;
  background-color: var(--sbs-legend-separator);
  margin: 0.5rem 0;
}

.dep-graph-legend .legend-shape {
  width: 16px;
  height: 12px;
  border: 1px solid var(--sbs-legend-shape-border);
  background: var(--sbs-legend-shape-bg);
}

.dep-graph-legend .legend-shape.ellipse {
  border-radius: 50%;
}

.dep-graph-legend .legend-shape.box {
  border-radius: 2px;
}

/* ========== SBS Container in Modal ========== */
/* Ensure sbs-container displays properly in modal */
.dep-modal-content .sbs-container {
  display: grid;
  grid-template-columns: 1fr 1fr;  /* Flexible 50/50 instead of fixed 100ch */
  gap: 1.5rem;
  margin-left: 0;  /* Override the normal 3rem margin */
  margin-bottom: 1rem;
  max-width: 100%;  /* Prevent growing beyond modal */
  overflow: hidden;  /* Prevent content from pushing modal wider */
}

.dep-modal-content .sbs-latex-column,
.dep-modal-content .sbs-lean-column {
  min-width: 0;  /* Allow shrinking below content size */
  overflow: hidden;  /* Prevent content overflow */
}

/* LaTeX proof toggle in modal */
.dep-modal-content .proof_wrapper {
  margin-top: 0.5rem;
}

.dep-modal-content .proof_heading {
  cursor: pointer;
}

/* Lean code max height in modal */
.dep-modal-content .lean-code {
  max-height: 400px;
  overflow-y: auto;
}

/* Modal links section - right-aligned with border */
.dep-modal-content .dep-modal-links {
  margin-top: 1rem;
  padding-top: 0.5rem;
  border-top: 1px solid var(--bp-border, #e0e0e0);
  text-align: right;
}

.dep-modal-content .dep-modal-links a {
  color: var(--bp-link, #0066cc);
  text-decoration: none;
}

.dep-modal-content .dep-modal-links a:hover {
  text-decoration: underline;
}
